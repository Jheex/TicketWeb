@{
    // Define o título da página para exibição no navegador
    ViewData["Title"] = "Abrir Novo Chamado";
}

<!-- Importa estilos do formulário -->
<link rel="stylesheet" href="~/css/form-styles.css" asp-append-version="true" />

<!-- Container principal do formulário -->
<div class="form-container">
    <div class="form-card">

        <!-- Cabeçalho do formulário -->
        <div class="form-header">
            <h1>Abrir Novo Chamado</h1>
            <p>Por favor, descreva seu problema com o máximo de detalhes.</p>
        </div>

        <!-- Formulário de criação de chamado -->
        <form asp-action="Create" method="post" enctype="multipart/form-data">

            <!-- Linha do formulário dividida em colunas -->
            <div class="form-row">

                <!-- Coluna esquerda com campos de usuário, categoria e prioridade -->
                <div class="form-column">
                    
                    <!-- Campo: Solicitante / Usuário -->
                    <div class="form-group">
                        <label for="UserId">
                            <i class="fa-solid fa-user"></i>
                            Solicitante / Usuário
                        </label>
                        <select id="UserId" name="UserId" class="form-control" required>
                            <option value="" disabled selected>-- Selecione quem está abrindo o chamado --</option>
                            @foreach (var user in ViewBag.Usuarios as IEnumerable<SelectListItem>)
                            {
                                <option value="@user.Value">@user.Text</option>
                            }
                        </select>
                    </div>

                    <!-- Campo: Categoria -->
                    <div class="form-group">
                        <label for="category">
                            <i class="fa-solid fa-bookmark"></i>
                            Categoria
                        </label>
                        <select id="category" name="Category" class="form-control">
                            <option value="" disabled selected>-- Selecione uma categoria --</option>
                            <option value="Hardware">Hardware</option>
                            <option value="Software">Software</option>
                            <option value="Network">Network</option>
                            <option value="Access">Acesso</option>
                            <option value="Outros">Outro</option>
                        </select>
                    </div>

                    <!-- Campo: Prioridade -->
                    <div class="form-group">
                        <label for="priority">
                            <i class="fa-solid fa-flag"></i>
                            Prioridade
                        </label>
                        <select id="priority" name="Priority" class="form-control">
                            <option value="" disabled selected>-- Selecione a priodade do chamado --</option>
                            <option value="Baixa">Baixa</option>
                            <option value="Média">Média</option>
                            <option value="Alta">Alta</option>
                            <option value="Urgente">Urgente</option>
                        </select>
                    </div>

                </div>

                <!-- Coluna direita com campos de título e descrição -->
                <div class="form-column">

                    <!-- Campo: Título / Assunto -->
                    <div class="form-group">
                        <label for="title">
                            <i class="fa-solid fa-heading"></i>
                            Título / Assunto
                        </label>
                        <input id="title" name="Title" class="form-control" placeholder="Ex: Computador não liga" required maxlength="20" />
                    </div>

                    <!-- Campo: Descrição detalhada -->
                    <div class="form-group">
                        <label for="description">
                            <i class="fa-solid fa-paragraph"></i>
                            Descrição Detalhada
                        </label>
                        <textarea id="description" name="Description" class="form-control" rows="5" placeholder="Inclua mensagens de erro, o que você estava fazendo..." maxlength="41"></textarea>
                    </div>

                </div>

            </div>

            <!-- Botões de ação -->
            <div class="form-actions">
                <a asp-controller="Dashboard" asp-action="Index" class="btn btn-secondary">Cancelar</a>
                <button type="submit" class="btn btn-primary">Enviar Chamado</button>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    <!-- Script para atualizar o nome do arquivo selecionado -->
    <script>
        function updateFileName(input) {
            const fileNameSpan = document.getElementById('file-name');
            if (input.files && input.files.length > 0) {
                fileNameSpan.textContent = input.files[0].name;
            } else {
                fileNameSpan.textContent = 'Clique para escolher um arquivo...';
            }
        }
    </script>
}
