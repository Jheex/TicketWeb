@model PIM.Models.Usuario

@{
    // Define o título da página
    ViewData["Title"] = "Perfil do Usuário";
}

<!-- Estilos da página de perfil -->
<link rel="stylesheet" href="~/css/perfil.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<div class="profile-container">

    <!-- Mensagem de sucesso -->
    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success">
            <i class="fa-solid fa-circle-check"></i> @TempData["SuccessMessage"]
        </div>
    }

    <!-- Mensagem de erro -->
    @if (TempData["ErrorMessage"] != null)
    {
        <div class="alert alert-danger">
            <i class="fa-solid fa-circle-xmark"></i> @TempData["ErrorMessage"]
        </div>
    }

    <!-- Card principal do perfil -->
    <div class="profile-card">

        <!-- Cabeçalho do perfil com avatar e informações do usuário -->
        <div class="profile-header">
            <div class="profile-avatar">
                <i class="fas fa-user-circle"></i>
            </div>
            <div class="profile-info">
                <h3>@Model.Username</h3>
                <p><i class="fas fa-envelope"></i> @Model.Email</p>
                <p><i class="fas fa-phone"></i> @Model.Telefone</p>

                <!-- Exibe endereço se existir -->
                @if (!string.IsNullOrEmpty(Model.Endereco))
                {
                    <p><i class="fas fa-location-dot"></i> @Model.Endereco</p>
                }

                <!-- Exibe data de nascimento se houver valor -->
                @if (Model.DataNascimento.HasValue)
                {
                    <p><i class="fas fa-calendar"></i> @Model.DataNascimento.Value.ToString("dd/MM/yyyy")</p>
                }
            </div>
        </div>

        <!-- Pequeno dashboard com total de tickets -->
        <div class="profile-dashboard">
            <div class="dashboard-item">
                <i class="fas fa-hourglass-half" style="color: var(--icon-color-open);"></i>
                <h4>@(ViewBag.TotalTicketsAbertos ?? 0)</h4>
                <p>Em Andamento</p>
            </div>
            <div class="dashboard-item">
                <i class="fas fa-check-circle" style="color: var(--icon-color-closed);"></i>
                <h4>@(ViewBag.TotalTicketsFechados ?? 0)</h4>
                <p>Concluídos</p>
            </div>
        </div>

        <!-- Observações do usuário, se houver -->
        @if (!string.IsNullOrEmpty(Model.Observacoes))
        {
            <div class="profile-observacoes">
                <h4><i class="fa-solid fa-note-sticky"></i> Observações</h4>
                <p>@Model.Observacoes</p>
            </div>
        }

        <!-- Botões de ação -->
        <div class="profile-actions">
            <a href="@Url.Action("Editar", "Perfil")" class="btn btn-primary">
                <i class="fas fa-edit"></i> Editar Perfil
            </a>
            <a href="@Url.Action("MudarSenha", "Perfil")" class="btn btn-secondary">
                <i class="fas fa-key"></i> Mudar Senha
            </a>
        </div>

    </div>
</div>
